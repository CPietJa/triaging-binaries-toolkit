# Variables
EXE=test

# Usual compilation flags
CFLAGS=-std=c11 -Wall -Wextra -g -O2 -march=native
CPPFLAGS=-I../include -DDEBUG
LDFLAGS=-lm

# Special rules and targets
.PHONY: all clean help

# Rules and targets
all: $(EXE)

$(EXE): test.o
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

test.o : test.c
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

clean:
	@rm -f *~ *.o $(EXE)

help:
	@echo "Usage:"
	@echo "  make [all]\t\tBuild the software"
	@echo "  make clean\t\tRemove all files generated by make"
	@echo "  make help\t\tDisplay this help"
